#map {
    height: 100vh;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
}

/* Custom Marker Styles */
:host ::ng-deep .custom-pin {
    background: transparent;
    border: none;
    
    .pin-core {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: white;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 0 5px rgba(0,0,0,0.5);
        z-index: 2;
    }

    .pin-glow {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        opacity: 0.6;
        animation: pulse 2s infinite;
        z-index: 1;

        &.status-free {
            background-color: var(--color-success);
            box-shadow: 0 0 15px var(--color-success);
        }
        &.status-dense {
            background-color: var(--color-warning); // Note: Dense is yellow/amber
            box-shadow: 0 0 15px var(--color-warning);
        }
        &.status-warning {
             background-color: #ff9100; // Orange
             box-shadow: 0 0 15px #ff9100;
        }
        &.status-critical {
            background-color: var(--color-critical);
            box-shadow: 0 0 20px var(--color-critical);
            animation: pulse-fast 1s infinite;
        }
    }
}

@keyframes pulse {
    0% { transform: translate(-50%, -50%) scale(0.95); opacity: 0.7; }
    50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.4; }
    100% { transform: translate(-50%, -50%) scale(0.95); opacity: 0.7; }
}

@keyframes pulse-fast {
    0% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.8; }
    50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.3; }
    100% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.8; }
}

/* Custom Tooltip Styles */
:host ::ng-deep .custom-tooltip {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;

    &:before { display: none; } // Hide Leaflet arrow

    .custom-tooltip-content {
        background: rgba(18, 18, 18, 0.95);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 8px;
        padding: 10px 14px;
        color: white;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        min-width: 150px;
        transform: translateY(-5px);
        transition: transform 0.2s ease, opacity 0.2s ease;
        animation: tooltipFadeIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        
        .tooltip-title {
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 4px;
            color: #fff;
        }
        
        .tooltip-desc {
            font-size: 0.8rem;
            color: #aaa;
            margin-bottom: 6px;
        }

        .tooltip-click-hint {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-accent);
            font-weight: 600;
        }
    }
}

@keyframes tooltipFadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(-5px); }
}
